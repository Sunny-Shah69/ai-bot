<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>J_ARIS</title>

<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

<script>
tailwind.config = { darkMode: 'class' }
</script>

<style>
body { font-family: Inter, sans-serif; cursor: none; }
::-webkit-scrollbar { display: none; }

/* animated gradient */
.bg-light {
  background: linear-gradient(120deg, #e0e7ff, #fdf2f8, #ecfeff);
  background-size: 300% 300%;
  animation: move 18s ease infinite;
}
.dark .bg-light {
  background: linear-gradient(120deg, #020617, #020617, #0f172a);
}

@keyframes move {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

/* mouse glow */
#glow {
  position: fixed;
  width: 300px;
  height: 300px;
  border-radius: 50%;
  pointer-events: none;
  background: radial-gradient(circle, rgba(99,102,241,0.25), transparent 60%);
  transform: translate(-50%, -50%);
  z-index: 0;
}

/* custom cursor */
#cursor {
  position: fixed;
  width: 10px;
  height: 10px;
  background: #6366f1;
  border-radius: 50%;
  pointer-events: none;
  transform: translate(-50%, -50%);
  z-index: 9999;
}
</style>
</head>

<body class="bg-light min-h-screen text-gray-900 dark:text-gray-100">

<div id="glow"></div>
<div id="cursor"></div>

<!-- TOP BAR -->
<header class="sticky top-0 z-10 bg-white/70 dark:bg-[#020617]/80 backdrop-blur border-b border-gray-200 dark:border-blue-900/40 px-6 py-3 flex justify-between items-center">
  <div>
    <div class="font-bold text-lg tracking-wide">J_ARIS</div>
    <div class="text-xs text-gray-500 dark:text-gray-400">
      Your best physics helper (and more)
    </div>
  </div>

  <div class="flex gap-2 items-center">
    <button id="normalBtn" onclick="setMode('normal')"
      class="px-3 py-1 rounded-full text-xs font-semibold bg-indigo-600 text-white">
      Normal
    </button>
    <button id="pwBtn" onclick="setMode('pw')"
      class="px-3 py-1 rounded-full text-xs font-semibold bg-gray-200 dark:bg-zinc-700">
      PW Kattar
    </button>
    <button onclick="toggleTheme()" class="px-3 py-1 rounded-full bg-gray-200 dark:bg-zinc-700">
      üåô / ‚òÄÔ∏è
    </button>
  </div>
</header>

<!-- CHAT -->
<main class="max-w-3xl mx-auto px-4 py-6 pb-28 relative z-10">
  <div id="chat"
    class="bg-white/80 dark:bg-[#020617]/80 backdrop-blur rounded-2xl border border-gray-200 dark:border-blue-900/40 p-4 min-h-[65vh] space-y-4">

    <div id="starter" class="text-center text-gray-600 dark:text-gray-400 py-20">
      <p class="font-semibold text-gray-800 dark:text-gray-200">
        J_ARIS is online üöÄ
      </p>
      <p class="text-sm mt-2">
        Friendly by default. Switch to PW Kattar when you want pain.
      </p>
    </div>

  </div>
</main>

<!-- INPUT -->
<div class="fixed bottom-0 left-0 right-0 bg-white/80 dark:bg-[#020617]/90 backdrop-blur border-t border-gray-200 dark:border-blue-900/40 z-10">
  <div class="max-w-3xl mx-auto px-4 py-3 flex gap-3">
    <textarea
      id="input"
      rows="1"
      placeholder="Ask something‚Ä¶ (Enter to send)"
      class="flex-1 resize-none px-3 py-2 rounded-lg
             bg-white dark:bg-[#020617]
             border border-gray-300 dark:border-blue-900/40
             placeholder-gray-500
             focus:outline-none focus:ring-2 focus:ring-indigo-500"
    ></textarea>

    <button
      id="sendBtn"
      class="px-5 py-2 rounded-lg bg-indigo-600 hover:bg-indigo-700 text-white font-semibold">
      Send
    </button>
  </div>
</div>

<script>
/* ================= CONFIG ================= */
const GROQ_API_KEY = "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";

const chat = document.getElementById("chat");
const input = document.getElementById("input");
const sendBtn = document.getElementById("sendBtn");
const starter = document.getElementById("starter");

let currentMode = "normal";

/* ================= THEME ================= */
function toggleTheme() {
  document.documentElement.classList.toggle("dark");
}

/* ================= MODE SWITCH ================= */
function setMode(mode) {
  currentMode = mode;
  addBubble(
    mode === "pw"
      ? "PW Kattar Advanced mode enabled. Physics only. No shortcuts."
      : "Normal mode enabled. Friendly, clear, and helpful.",
    "bot"
  );
}

/* ================= PROMPTS (UNCHANGED TEXT) ================= */
const NORMAL_CONTEXT = `
You are J_ARIS, a study-focused academic assistant.

Role:
- Behave like a helpful teacher or tutor.
- Keep responses educational and task-oriented.

Rules:
- Respond in English.
- Be polite, clear, and neutral.
- Do NOT be flirty, emotional, or conversational.
- Do NOT behave like a personal or relationship chatbot.

Behavior:
- Greetings like "Hi" or "Hello" should receive a short, professional response.
- Answer academic questions clearly and concisely.
- Expand only when the user asks for detail or explanation.

Goal:
Help the student understand concepts and solve problems.
`;

const PW_CONTEXT = `
You are J_ARIS in PW Kattar Advanced mode.

IMPORTANT BEHAVIOR RULES:
- This mode is ONLY for physics.
- If the user greets ("hi", "hello"), reply briefly and reply with gud evening gud evening hello beta.
- Do NOT start teaching unless a physics question is asked.
-brief replies and you're bot from physics wallah and you're saleem bhaiya from pw also known as saleemian
-speak like big brother
- also gives shayari sometimes from saleem sir yt shayari hinglish only

When a physics question IS asked:
- Teach at JEE Advanced level and from basic.
- Use first-principles reasoning.
- Explain examiner traps and common mistakes.
- Keep the explanation proportional to the question.
- Do NOT over-explain trivial questions.

When the input is NOT physics:
- Politely say this mode is for physics only.
- Suggest switching to Normal mode.

Tone:
- jokes like saleem sir very humourous tone
- give skc after solving everyqeustion and skc means shortcut method or short summary
- No unnecessary questions back to the user.
- use references from various movies and tv shows while giving skc but skc should always be in hinglish
`;

/* ================= UI ================= */
function addBubble(text, who) {
  starter?.remove();
  const wrap = document.createElement("div");
  wrap.className = who === "user" ? "text-right" : "text-left";

  const bubble = document.createElement("div");
  bubble.className =
    who === "user"
      ? "inline-block bg-indigo-600 text-white px-4 py-2 rounded-xl rounded-br-none max-w-[75%]"
      : "inline-block bg-white dark:bg-[#020617] border border-gray-200 dark:border-blue-900/40 px-4 py-2 rounded-xl rounded-bl-none max-w-[75%]";

  bubble.innerText = text;
  wrap.appendChild(bubble);
  chat.appendChild(wrap);
  chat.scrollTop = chat.scrollHeight;
}

/* ================= SEND ================= */
async function sendMessage() {
  const text = input.value.trim();
  if (!text) return;

  addBubble(text, "user");
  input.value = "";
  sendBtn.disabled = true;

  const thinking = document.createElement("div");
  thinking.className = "text-sm text-gray-500";
  thinking.innerText = "J_ARIS is thinking‚Ä¶";
  chat.appendChild(thinking);

  const systemPrompt = currentMode === "pw" ? PW_CONTEXT : NORMAL_CONTEXT;

  try {
    const res = await fetch("https://api.groq.com/openai/v1/chat/completions", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "Authorization": "Bearer " + GROQ_API_KEY
      },
      body: JSON.stringify({
        model: "llama-3.1-8b-instant",
        messages: [
          { role: "system", content: systemPrompt },
          { role: "user", content: text }
        ]
      })
    });

    const data = await res.json();
    thinking.remove();
    addBubble(data.choices[0].message.content, "bot");

  } catch (err) {
    thinking.remove();
    addBubble("Something went wrong. Please try again.", "bot");
    console.error(err);
  } finally {
    sendBtn.disabled = false;
  }
}

/* ================= EVENTS ================= */
sendBtn.addEventListener("click", sendMessage);
input.addEventListener("keydown", e => {
  if (e.key === "Enter" && !e.shiftKey) {
    e.preventDefault();
    sendMessage();
  }
});

/* ================= MOUSE EFFECT ================= */
document.addEventListener("mousemove", e => {
  document.getElementById("glow").style.left = e.clientX + "px";
  document.getElementById("glow").style.top = e.clientY + "px";
  document.getElementById("cursor").style.left = e.clientX + "px";
  document.getElementById("cursor").style.top = e.clientY + "px";
});
</script>

</body>
</html>


<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>J_ARIS</title>

<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

<script>
tailwind.config = { darkMode: 'class' }
</script>

<style>
body { font-family: Inter, sans-serif; }
::-webkit-scrollbar { display: none; }

/* animated gradient background */
.bg-animated {
  background: linear-gradient(-45deg, #0f172a, #020617, #020617, #0f172a);
  background-size: 400% 400%;
  animation: gradientMove 15s ease infinite;
}

@keyframes gradientMove {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}
</style>
</head>

<body class="bg-animated min-h-screen text-gray-100">

<!-- TOP BAR -->
<header class="sticky top-0 z-10 bg-[#0b1a2d] border-b border-blue-900/40 px-6 py-3 flex justify-between items-center">
  <div class="font-semibold text-lg tracking-wide">J_ARIS</div>
  <span class="text-xs text-blue-400">online</span>
</header>

<!-- CHAT AREA -->
<main class="max-w-3xl mx-auto px-4 py-6 pb-28">
  <div id="chat"
    class="bg-[#020617]/80 backdrop-blur rounded-2xl border border-blue-900/30 p-4 min-h-[65vh] space-y-4">

    <div id="starter" class="text-center text-gray-400 py-20">
      <p class="font-medium text-gray-200">J_ARIS is ready.</p>
      <p class="text-sm mt-2">
        Ask anything. English by default.
      </p>
    </div>

  </div>
</main>

<!-- INPUT -->
<div class="fixed bottom-0 left-0 right-0 bg-[#020617]/90 backdrop-blur border-t border-blue-900/40">
  <div class="max-w-3xl mx-auto px-4 py-3 flex gap-3">
    <textarea
      id="input"
      rows="1"
      placeholder="Type a message… (Enter to send)"
      class="flex-1 resize-none px-3 py-2 rounded-lg
             bg-[#020617] text-gray-100
             border border-blue-900/40
             placeholder-gray-500
             focus:outline-none focus:ring-2 focus:ring-blue-600"
    ></textarea>

    <button
      id="sendBtn"
      class="px-5 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white font-semibold">
      Send
    </button>
  </div>
</div>

<script>
/* ================= CONFIG ================= */
const GROQ_API_KEY = "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";

const chat = document.getElementById("chat");
const input = document.getElementById("input");
const sendBtn = document.getElementById("sendBtn");
const starter = document.getElementById("starter");

/* ================= SYSTEM PROMPT ================= */
const SYSTEM_CONTEXT = `
You are J_ARIS, a calm and intelligent AI assistant.

Language rules:
- Respond in English ONLY.
- Switch to Hinglish ONLY if the user explicitly asks for Hinglish.

Behavior:
- Be clear, respectful, and natural.
- Do not assume the topic.
- Answer only what is asked.
- Keep explanations concise unless the user asks for depth.
`;

/* ================= UI ================= */
function addBubble(text, who) {
  starter?.remove();

  const wrap = document.createElement("div");
  wrap.className = who === "user" ? "text-right" : "text-left";

  const bubble = document.createElement("div");
  bubble.className =
    who === "user"
      ? "inline-block bg-blue-600 text-white px-4 py-2 rounded-xl rounded-br-none max-w-[75%]"
      : "inline-block bg-[#020617] border border-blue-900/40 text-gray-100 px-4 py-2 rounded-xl rounded-bl-none max-w-[75%]";

  bubble.innerText = text;
  wrap.appendChild(bubble);
  chat.appendChild(wrap);
  chat.scrollTop = chat.scrollHeight;
}

/* ================= SEND ================= */
async function sendMessage() {
  const text = input.value.trim();
  if (!text) return;

  addBubble(text, "user");
  input.value = "";
  sendBtn.disabled = true;

  const thinking = document.createElement("div");
  thinking.className = "text-sm text-gray-500";
  thinking.innerText = "J_ARIS is thinking…";
  chat.appendChild(thinking);
  chat.scrollTop = chat.scrollHeight;

  try {
    const res = await fetch("https://api.groq.com/openai/v1/chat/completions", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "Authorization": "Bearer " + GROQ_API_KEY
      },
      body: JSON.stringify({
        model: "llama-3.1-8b-instant",
        messages: [
          { role: "system", content: SYSTEM_CONTEXT },
          { role: "user", content: text }
        ]
      })
    });

    const data = await res.json();
    thinking.remove();

    addBubble(data.choices[0].message.content, "bot");

  } catch (err) {
    thinking.remove();
    addBubble("Something went wrong. Please try again.", "bot");
    console.error(err);
  } finally {
    sendBtn.disabled = false;
  }
}

/* ================= EVENTS ================= */
sendBtn.addEventListener("click", sendMessage);

input.addEventListener("keydown", e => {
  if (e.key === "Enter" && !e.shiftKey) {
    e.preventDefault();
    sendMessage();
  }
});
</script>

</body>
</html>
